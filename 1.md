# ЛАБОРАТОРНАЯ РАБОТА №1
# ОПРЕДЕЛЕНИЕ СТРУКТУРЫ СИСТЕМЫ РЕАЛЬНОГО ВРЕМЕНИ «КОФЕМАШИНА»

## Цель работы

Определение структуры системы реального времени «Кофемашина» как совокупности объектов и их отношений. Применение стратегии «подчеркивания существительных» для выделения объектов системы.

---

## 1. Основные стратегии определения объектов

При проектировании СРВ используются следующие стратегии выделения объектов:

| Стратегия | Описание |
|-----------|----------|
| Подчеркивание существительных | Анализ описания проблемы с выделением существительных как потенциальных объектов |
| Использование предметной области | Выделение объектов на основе знаний о предметной области |
| Использование сценариев | Анализ типичных сценариев использования системы |
| Структурный анализ | Выделение объектов на основе структуры данных |

В данной работе используется стратегия **«подчеркивания существительных»**.

---

## 2. Определение объектов системы

### Описание проблемы

**Контроллер** должен управлять **кофемашиной** в офисном помещении.

**Кофемашина** содержит набор **кнопок выбора напитка** (эспрессо, американо, капучино, латте, горячая вода), каждая из которых соответствует желаемому напитку. **Кофемашина** имеет **дисплей** для отображения текущего состояния и выбранного напитка.

**Кофемашина** имеет **резервуар для воды** с **датчиком уровня воды**, **контейнер для кофейных зёрен** с **датчиком наличия зёрен**, и **контейнер для отходов** с **датчиком заполнения отходов**.

**Кофемашина** оснащена **кофемолкой** для помола зёрен, **нагревательным элементом** для нагрева воды, **помпой** для подачи воды под давлением, и **капучинатором** для взбивания молока.

На передней панели расположен **лоток для чашки** с **датчиком наличия чашки**. Если **чашка** отсутствует при запуске приготовления, система выдаёт предупреждение на **дисплей** и ожидает установки **чашки**.

**Кнопка включения/выключения** управляет питанием машины. **Кнопка отмены** позволяет прервать процесс приготовления напитка.

При выборе напитка **индикатор кнопки** подсвечивается, показывая активный выбор. После завершения приготовления подсветка выключается.

**Датчик температуры** контролирует нагрев воды. Приготовление напитка начинается только после достижения рабочей температуры (90-95°C).

**Таймер** контролирует время приготовления напитка. При превышении максимального времени (60 секунд) система переходит в аварийный режим.

С целью обеспечения безопасности **датчик перегрева** отслеживает температуру нагревательного элемента. В случае перегрева (>120°C) система отключает **нагревательный элемент** и передаёт информацию в **сервисную службу**.

---

### Список выделенных объектов

На основе анализа описания проблемы выделены следующие объекты:

1. Контроллер
2. Кофемашина
3. Кнопки выбора напитка
4. Дисплей
5. Резервуар для воды
6. Датчик уровня воды
7. Контейнер для зёрен
8. Датчик наличия зёрен
9. Контейнер для отходов
10. Датчик заполнения отходов
11. Кофемолка
12. Нагревательный элемент
13. Помпа
14. Капучинатор
15. Лоток для чашки
16. Датчик наличия чашки
17. Чашка
18. Кнопка включения/выключения
19. Кнопка отмены
20. Индикатор кнопки
21. Датчик температуры
22. Таймер
23. Датчик перегрева
24. Сервисная служба

---

### Перечень наиболее важных объектов системы

1. Контроллер кофемашины
2. Резервуар для воды
3. Контейнер для зёрен
4. Контейнер для отходов
5. Кофемолка
6. Нагревательный элемент
7. Помпа
8. Капучинатор
9. Дисплей
10. Лоток для чашки
11. Кнопки выбора напитка
12. Кнопка включения/выключения
13. Кнопка отмены
14. Датчики (уровня воды, наличия зёрен, заполнения отходов, температуры, перегрева, наличия чашки)
15. Таймер
16. Сервисная служба

---

## 3. Определение отношений между объектами системы

### Таблица источников и получателей сообщений

| Источник | Сообщение | Получатель |
|----------|-----------|------------|
| Кнопка выбора напитка | Выбран напиток | Контроллер |
| Кнопка включения | Включить/Выключить | Контроллер |
| Кнопка отмены | Отменить приготовление | Контроллер |
| Датчик уровня воды | Уровень воды | Контроллер |
| Датчик наличия зёрен | Наличие зёрен | Контроллер |
| Датчик заполнения отходов | Уровень отходов | Контроллер |
| Датчик температуры | Текущая температура | Контроллер |
| Датчик перегрева | Сигнал перегрева | Контроллер |
| Датчик наличия чашки | Наличие чашки | Контроллер |
| Контроллер | Команда помола | Кофемолка |
| Контроллер | Команда нагрева | Нагревательный элемент |
| Контроллер | Команда подачи воды | Помпа |
| Контроллер | Команда взбивания молока | Капучинатор |
| Контроллер | Вывести информацию | Дисплей |
| Контроллер | Подсветить кнопку | Индикатор кнопки |
| Контроллер | Запустить таймер | Таймер |
| Таймер | Таймаут | Контроллер |
| Контроллер | Сигнал аварии | Сервисная служба |

---

### Диаграмма объектов системы кофемашины

```
                    ┌─────────────────┐
                    │ Сервисная служба│
                    └────────▲────────┘
                             │ авария
                    ┌────────┴────────┐
                    │   КОНТРОЛЛЕР    │◄──────────────────────┐
                    └────────┬────────┘                       │
           ┌─────────────────┼─────────────────┐              │
           │                 │                 │              │
           ▼                 ▼                 ▼              │
    ┌──────────┐      ┌──────────┐      ┌──────────┐   ┌──────┴─────┐
    │ Кофемолка│      │Нагреватель│     │  Помпа   │   │Капучинатор │
    └──────────┘      └──────────┘      └──────────┘   └────────────┘
           ▲                 ▲                 ▲
           │                 │                 │
    ┌──────┴─────┐    ┌──────┴─────┐    ┌──────┴─────┐
    │ Контейнер  │    │ Резервуар  │    │   Лоток    │
    │  зёрен     │    │   воды     │    │   чашки    │
    └──────┬─────┘    └──────┬─────┘    └──────┬─────┘
           │                 │                 │
    ┌──────┴─────┐    ┌──────┴─────┐    ┌──────┴─────┐
    │ Датчик     │    │ Датчик     │    │ Датчик     │
    │ зёрен      │    │ воды       │    │ чашки      │
    └────────────┘    └────────────┘    └────────────┘
           │                 │                 │
           └─────────────────┼─────────────────┘
                             ▼
                    ┌────────────────┐
                    │   КОНТРОЛЛЕР   │◄─────┬───────────┐
                    └───────┬────────┘      │           │
                            │          ┌────┴────┐ ┌────┴────┐
                            ▼          │ Датчик  │ │ Датчик  │
                    ┌────────────┐     │ темп-ры │ │перегрева│
                    │  Дисплей   │     └─────────┘ └─────────┘
                    └────────────┘

    ┌────────────┐  ┌────────────┐  ┌────────────┐
    │  Кнопка    │  │  Кнопка    │  │  Кнопка    │──► Контроллер
    │  напитка   │  │  ВКЛ/ВЫКЛ  │  │  отмены    │
    └────────────┘  └────────────┘  └────────────┘
```

---

## 4. Определение атрибутов объектов

### Атрибуты объекта «Кофемашина»

**Вопрос 1: Каковы функции объекта?**
Основная функция кофемашины — приготовление различных кофейных напитков по запросу пользователя.

**Вопрос 2: Какая информация необходима объекту для выполнения функций?**
- Текущее состояние (выключена, готова, готовит, ошибка)
- Выбранный напиток
- Уровень воды в резервуаре
- Наличие зёрен
- Уровень заполнения контейнера отходов
- Температура нагревателя
- Наличие чашки

**Вопрос 3: Над какой информацией выполняет объект свои операции?**
Кофемашина выполняет операции над информацией о состоянии всех компонентов и параметрах приготовления.

**Вопрос 4: Какой информацией о самом себе должен владеть объект?**
- Текущее состояние
- Выбранный напиток
- Прогресс приготовления

**Вопрос 5: Не являются ли идентифицированные атрибуты сами объектами?**
Да, кофемолка, нагревательный элемент, помпа, капучинатор — это отдельные объекты со своими состояниями и операциями.

### Итоговые атрибуты объекта «Кофемашина»:

1. Состояние работы (выключена, готова, готовит, ошибка)
2. Выбранный напиток (эспрессо, американо, капучино, латте, горячая вода, нет)
3. Прогресс приготовления (0-100%)
4. Температура воды (°C)

---

## 5. Определение классов

### Классы системы кофемашины:

**Классы с единственным экземпляром:**
1. Контроллер
2. Кофемашина
3. Дисплей
4. Резервуар для воды
5. Контейнер для зёрен
6. Контейнер для отходов
7. Кофемолка
8. Нагревательный элемент
9. Помпа
10. Капучинатор
11. Лоток для чашки
12. Таймер
13. Сервисная служба

**Классы без наследников:**
1. Дисплей
2. Резервуар
3. Контейнер
4. Лоток

**Классы с наследниками:**

### Диаграмма классов «Кнопки»

```
                    ┌──────────────┐
                    │    Кнопка    │
                    ├──────────────┤
                    │ - подсветка  │
                    │ - состояние  │
                    ├──────────────┤
                    │ + нажать()   │
                    │ + подсветить()│
                    └──────┬───────┘
           ┌───────────────┼───────────────┐
           ▼               ▼               ▼
    ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
    │КнопкаНапитка │ │КнопкаПитания │ │КнопкаОтмены  │
    ├──────────────┤ ├──────────────┤ ├──────────────┤
    │ - типНапитка │ │              │ │              │
    ├──────────────┤ ├──────────────┤ ├──────────────┤
    │ + выбрать()  │ │ + включить() │ │ + отменить() │
    └──────────────┘ │ + выключить()│ └──────────────┘
                     └──────────────┘
```

### Диаграмма классов «Датчики»

```
                    ┌───────────────────┐
                    │      Датчик       │
                    ├───────────────────┤
                    │ - значение        │
                    │ - порог           │
                    ├───────────────────┤
                    │ + получитьЗначение()│
                    │ + проверитьПорог() │
                    └─────────┬─────────┘
        ┌─────────────────────┼─────────────────────┐
        ▼                     ▼                     ▼
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│ДатчикУровня   │     │ДатчикТемпературы│   │ДатчикНаличия  │
├───────────────┤     ├───────────────┤     ├───────────────┤
│ - минУровень  │     │ - минТемп     │     │ - естьОбъект  │
│ - максУровень │     │ - максТемп    │     ├───────────────┤
├───────────────┤     ├───────────────┤     │ + проверить() │
│ + получить()  │     │ + получить()  │     └───────────────┘
│ + проверить() │     │ + перегрев()  │
└───────────────┘     └───────────────┘
```

### Диаграмма классов «Исполнительные устройства»

```
                    ┌───────────────────┐
                    │ИсполнительноеУстр │
                    ├───────────────────┤
                    │ - состояние       │
                    ├───────────────────┤
                    │ + включить()      │
                    │ + выключить()     │
                    │ + получитьСостояние()│
                    └─────────┬─────────┘
        ┌─────────────────────┼─────────────────────┐
        ▼                     ▼                     ▼
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│  Кофемолка    │     │    Помпа      │     │  Нагреватель  │
├───────────────┤     ├───────────────┤     ├───────────────┤
│ - времяПомола │     │ - давление    │     │ - температура │
├───────────────┤     ├───────────────┤     ├───────────────┤
│ + молоть()    │     │ + подать()    │     │ + нагреть()   │
└───────────────┘     └───────────────┘     └───────────────┘
```

---

### Первый вариант диаграммы классов системы кофемашины

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           ДИАГРАММА КЛАССОВ                                 │
│                        СИСТЕМЫ КОФЕМАШИНЫ                                   │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────┐           ┌──────────────┐          ┌──────────────┐
    │СервиснаяСлужба│◄─────────│  Контроллер  │─────────►│   Дисплей    │
    └──────────────┘   1:1     └──────┬───────┘   1:1    └──────────────┘
                                      │
            ┌─────────────────────────┼─────────────────────────┐
            │                         │                         │
            ▼ 1:М                     ▼ 1:М                     ▼ 1:1
    ┌──────────────┐          ┌──────────────┐          ┌──────────────┐
    │    Кнопка    │          │    Датчик    │          │    Таймер    │
    └──────────────┘          └──────────────┘          └──────────────┘
            │                         │
    ┌───────┴───────┐         ┌───────┴───────┐
    ▼               ▼         ▼               ▼
┌────────┐     ┌────────┐  ┌────────┐    ┌────────┐
│Напитка │     │Питания │  │Уровня  │    │Темп-ры │
└────────┘     └────────┘  └────────┘    └────────┘

    ┌──────────────┐          ┌──────────────┐          ┌──────────────┐
    │ Кофемашина   │◄─────────│  Контроллер  │─────────►│Исполн.Устр.  │
    └──────┬───────┘   1:1    └──────────────┘   1:М    └──────┬───────┘
           │                                                    │
    ┌──────┼──────┐                                    ┌────────┼────────┐
    ▼      ▼      ▼                                    ▼        ▼        ▼
┌──────┐┌──────┐┌──────┐                          ┌────────┐┌──────┐┌────────┐
│Резерв││Контей││Лоток │                          │Кофемол.││Помпа ││Нагрев. │
│воды  ││зёрен ││чашки │                          └────────┘└──────┘└────────┘
└──────┘└──────┘└──────┘
```

### Описание отношений:

1. **Контроллер – Сервисная служба** — контроллер передаёт информацию об авариях (ассоциация, 1:1)
2. **Контроллер – Дисплей** — контроллер управляет выводом информации (ассоциация, 1:1)
3. **Контроллер – Кнопка** — кнопки передают нажатия контроллеру (ассоциация, М:1)
4. **Контроллер – Датчик** — датчики передают показания контроллеру (ассоциация, М:1)
5. **Контроллер – Таймер** — контроллер управляет таймером (ассоциация, 1:1)
6. **Контроллер – Кофемашина** — контроллер управляет кофемашиной (ассоциация, 1:1)
7. **Контроллер – Исполнительное устройство** — контроллер управляет устройствами (ассоциация, 1:М)
8. **Кофемашина – Резервуар воды** — резервуар часть кофемашины (композиция, 1:1)
9. **Кофемашина – Контейнер зёрен** — контейнер часть кофемашины (композиция, 1:1)
10. **Кофемашина – Лоток чашки** — лоток часть кофемашины (композиция, 1:1)
11. **Резервуар – Датчик уровня** — датчик часть резервуара (композиция, 1:1)
12. **Контейнер – Датчик наличия** — датчик часть контейнера (композиция, 1:1)
13. **Лоток – Датчик чашки** — датчик часть лотка (композиция, 1:1)
14. **Нагреватель – Датчик температуры** — датчик часть нагревателя (композиция, 1:1)
15. **Нагреватель – Датчик перегрева** — датчик часть нагревателя (композиция, 1:1)

---

## 6. Выводы

В лабораторной работе выполнен этап анализа системы реального времени «Кофемашина». Для определения объектов использована стратегия «подчёркивания существительных» в описании проблемы.

**Результаты работы:**
- Выделено **24 объекта** системы
- Определено **15 отношений** между классами
- Построены диаграммы классов для иерархий «Кнопки», «Датчики», «Исполнительные устройства»
- Создана общая диаграмма классов системы

Система кофемашины имеет типичную структуру СРВ с центральным контроллером, датчиками для получения информации о состоянии и исполнительными устройствами для выполнения действий. Это обеспечивает модульность, тестируемость и расширяемость системы.
